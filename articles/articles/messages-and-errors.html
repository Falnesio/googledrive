<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Messages and errors in googledrive • googledrive</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="../../tidyverse.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><link href="../../tidyverse-2.css" rel="stylesheet">
<!--optional theme--><link href="../../.css" rel="stylesheet">
<meta property="og:title" content="Messages and errors in googledrive">
<meta property="og:description" content="googledrive">
<meta property="og:image" content="https://googledrive.tidyverse.org/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../../index.html">googledrive</a>
        <div class="info hidden-xs hidden-sm">
          <span class="partof">part of the <a href="https://tidyverse.org">tidyverse</a></span>
          <span class="version version-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.9.0.9000</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="../../articles/googledrive.html">Get started</a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/articles/file-identification.html">File Identification</a>
    </li>
    <li>
      <a href="../../articles/articles/multiple-files.html">Dealing with multiple files</a>
    </li>
    <li>
      <a href="../../articles/articles/permissions.html">File permissions</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Package configuration</li>
    <li>
      <a href="../../articles/articles/bring-your-own-app.html">Bring your own OAuth app or API key</a>
    </li>
    <li class="divider">
    <li>
      <a href="../../articles/index.html">More...</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Blog posts</li>
    <li>
      <a href="https://www.tidyverse.org/blog/2019/08/googledrive-1-0-0/">Version 1.0.0</a>
    </li>
    <li class="divider">
    <li>
      <a href="../../news/index.html">Change log</a>
    </li>
  </ul>
</li>
        <li>
  <a href="https://github.com/tidyverse/googledrive/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="messages-and-errors_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Messages and errors in googledrive</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidyverse/googledrive/blob/master/vignettes/articles/messages-and-errors.Rmd"><code>vignettes/articles/messages-and-errors.Rmd</code></a></small>
      <div class="hidden name"><code>messages-and-errors.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://googledrive.tidyverse.org">googledrive</a></span><span class="op">)</span></code></pre></div>
<p><em>In a hidden chunk here, I “export” the internal helpers covered below.</em></p>
<div id="user-facing-messages" class="section level2">
<h2 class="hasAnchor">
<a href="#user-facing-messages" class="anchor"></a>User-facing messages</h2>
<p>Everything should be emitted by helpers in <code>utils-ui.R</code>, such as <code>drive_bullets()</code>. These helpers are all wrappers around cli functions, such as <code><a href="https://rdrr.io/pkg/cli/man/cli_bullets.html">cli::cli_bullets()</a></code>.</p>
<p><em>These may not demo well via pkgdown, but the interactive experience is nice.</em></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">drive_bullets</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
        <span class="st">"noindent"</span>,
  <span class="st">" "</span> <span class="op">=</span> <span class="st">"indent"</span>,
  <span class="st">"*"</span> <span class="op">=</span> <span class="st">"bullet"</span>,
  <span class="st">"&gt;"</span> <span class="op">=</span> <span class="st">"arrow"</span>,
  <span class="st">"v"</span> <span class="op">=</span> <span class="st">"success"</span>,
  <span class="st">"x"</span> <span class="op">=</span> <span class="st">"danger"</span>,
  <span class="st">"!"</span> <span class="op">=</span> <span class="st">"warning"</span>,
  <span class="st">"i"</span> <span class="op">=</span> <span class="st">"info"</span>
<span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; noindent</span>
<span class="co">#&gt;   indent</span>
<span class="co">#&gt; • bullet</span>
<span class="co">#&gt; → arrow</span>
<span class="co">#&gt; ✔ success</span>
<span class="co">#&gt; ✖ danger</span>
<span class="co">#&gt; ! warning</span>
<span class="co">#&gt; ℹ info</span></code></pre></div>
<p>The helpers encourage consistent styling and make it possible to selectively silence messages coming from googledrive. The googledrive message helpers:</p>
<ul>
<li>Use the <a href="https://cli.r-lib.org/index.html">cli package</a> to get interpolation, inline markup, and pluralization</li>
<li>Eventually route through <code><a href="https://rlang.r-lib.org/reference/abort.html">rlang::inform()</a></code>, which is important because <code>inform()</code> prints to standard output in interactive sessions. This means that informational messages won’t have the same “look” as errors and can generally be more stylish, at least in IDEs like RStudio.</li>
<li>Are under the control of the <code>googledrive_quiet</code> option. If it’s unset, the default is to show messages (unless we’re testing, i.e. the environment variable <code>TESTTHAT</code> is <code>"true"</code>). Doing <code>options(googledrive_quiet = TRUE)</code> will suppress messages. There are withr-style convenience helpers: <code><a href="../../reference/googledrive-configuration.html">local_drive_quiet()</a></code> and <code><a href="../../reference/googledrive-configuration.html">with_drive_quiet()</a></code>.</li>
</ul>
<div id="inline-styling" class="section level3">
<h3 class="hasAnchor">
<a href="#inline-styling" class="anchor"></a>Inline styling</h3>
<p>How we use the inline classes:</p>
<ul>
<li>
<code>.field</code> for the value of an argument, e.g. a MIME type</li>
<li>
<code>.arg</code>, <code>.fun</code>, <code>.path</code> for their usual purpose</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">drive_bullets</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
  <span class="st">"We need to talk about the {.arg foofy} argument to {.fun blarg}"</span>,
  <span class="st">"You provided {.field a_very_weird_value} and I suspect you're confused \\
   about something"</span>
<span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; We need to talk about the `foofy` argument to `blarg()`</span>
<span class="co">#&gt; You provided 'a_very_weird_value' and I suspect you're confused about something</span></code></pre></div>
<p>Most relevant cli docs:</p>
<ul>
<li><a href="https://cli.r-lib.org/reference/inline-markup.html">CLI inline markup</a></li>
<li><a href="https://cli.r-lib.org/articles/semantic-cli.html">Building a Semantic CLI</a></li>
</ul>
</div>
<div id="bullets" class="section level3">
<h3 class="hasAnchor">
<a href="#bullets" class="anchor"></a>Bullets</h3>
<p>I use the different bullet points in <code>drive_bullets()</code> to convey a mood.</p>
<p>Exclamation mark <code>"!"</code>: I’m not throwing an error or warning, but I want to get the user’s attention, because it seems likely (but not certain) that they misunderstand something about googledrive or Google Drive or their Drive files. Examples:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">drive_bullets</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
  <span class="st">"!"</span> <span class="op">=</span> <span class="st">"Ignoring {.arg type}. Only consulted for native Google file types."</span>,
  <span class="st">" "</span> <span class="op">=</span> <span class="st">"MIME type of {.arg file}: {.field mime_type}."</span>
<span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; ! Ignoring `type`. Only consulted for native Google file types.</span>
<span class="co">#&gt;   MIME type of `file`: 'mime_type'.</span>

<span class="fu">drive_bullets</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
  <span class="st">"!"</span> <span class="op">=</span> <span class="st">"Currently only fields for the {.field files} resource can be \\
         checked for validity."</span>,
  <span class="st">" "</span> <span class="op">=</span> <span class="st">"Nothing done."</span>
<span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; ! Currently only fields for the 'files' resource can be checked for validity.</span>
<span class="co">#&gt;   Nothing done.</span>

<span class="fu">drive_bullets</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
  <span class="st">"!"</span> <span class="op">=</span> <span class="st">"No updates specified."</span>
<span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; ! No updates specified.</span>

<span class="fu">drive_bullets</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
  <span class="st">"!"</span> <span class="op">=</span> <span class="st">"No such file to delete."</span>
<span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; ! No such file to delete.</span></code></pre></div>
<p>Information “i”: I’m just keeping you informed of how my work is going.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">drive_bullets</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
  <span class="st">"i"</span> <span class="op">=</span> <span class="st">"No pre-existing file at this filepath. Calling \\
         {.fun drive_upload}."</span>
<span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; ℹ No pre-existing file at this filepath. Calling `drive_upload()`.</span>
<span class="fu">drive_bullets</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
  <span class="st">"i"</span> <span class="op">=</span> <span class="st">"Pre-existing file at this filepath. Calling \\
         {.fun drive_update}."</span>
<span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; ℹ Pre-existing file at this filepath. Calling `drive_update()`.</span>

<span class="fu">drive_bullets</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
  <span class="st">"i"</span> <span class="op">=</span> <span class="st">"Not logged in as any specific Google user."</span>
<span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; ℹ Not logged in as any specific Google user.</span></code></pre></div>
<p>In cases where we determine there is nothing we can or should do, sometimes I use <code>"!"</code> and sometimes I use <code>"i"</code>. It depends on whether it feels like the user could or should have known that no work would be possible or needed.</p>
</div>
<div id="drive-files-as-bullets" class="section level3">
<h3 class="hasAnchor">
<a href="#drive-files-as-bullets" class="anchor"></a>Drive files as bullets</h3>
<p>Use <code>drive_bullets()</code> in combination with <code>cli_format_dribble()</code>, which formats individual Drive files and makes them into <code>"*"</code> bullets.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/drive_find.html">drive_find</a></span><span class="op">(</span>n_max <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>

<span class="co"># if you know there's only 1 file</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span>
<span class="fu">drive_bullets</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"File VERBED:"</span>, <span class="fu">cli_format_dribble</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; File VERBED:</span>
<span class="co">#&gt; • Rlogo.pdf &lt;id: 1opPZyo4WUiue56qlF8SO5ipaTJwPLzZg&gt;</span>

<span class="co"># if you don't know how many files</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="va">dat</span>
<span class="fu">drive_bullets</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
  <span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/cli/man/pluralize.html">pluralize</a></span><span class="op">(</span><span class="st">"File{?s} VERBED:{cli::qty(nrow(x))}"</span><span class="op">)</span>,
  <span class="fu">cli_format_dribble</span><span class="op">(</span><span class="va">dat</span><span class="op">)</span>
<span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Files VERBED:</span>
<span class="co">#&gt; • Rlogo.pdf &lt;id: 1opPZyo4WUiue56qlF8SO5ipaTJwPLzZg&gt;</span>
<span class="co">#&gt; • THANKS &lt;id: 1JCQ06Wj6AjntiyjnHsXmmcHZWCkBNgBJ&gt;</span>
<span class="co">#&gt; • googledrive-NEWS.md &lt;id: 1wMnFwFSIG0eQ4UUUEbn6-udF3GoKY3xN&gt;</span>
<span class="co">#&gt; • def &lt;id: 12xjsE3eIf84VSFF5hNhSEOnQF8DDSHkc&gt;</span>
<span class="co">#&gt; • abc &lt;id: 1qkS667DEnvDzTuVBSyj5NeGzIGbrAy9Q&gt;</span>
<span class="co">#&gt;   … and 5 more</span></code></pre></div>
</div>
</div>
<div id="errors" class="section level2">
<h2 class="hasAnchor">
<a href="#errors" class="anchor"></a>Errors</h2>
<p><em>I haven’t gotten here yet</em></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="tidyverse">
  <p>googledrive is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="https://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>
    Developed by Lucy D'Agostino McGowan, <a href="https://jennybryan.org">Jennifer Bryan</a>, <a href="https://www.rstudio.com"><img src="https://www.tidyverse.org/rstudio-logo.svg" alt="RStudio" height="24"></a>.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>

      </footer>
</div>

  


  </body>
</html>
